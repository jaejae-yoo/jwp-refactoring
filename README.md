# 키친포스

## 1단계 요구 사항

### 메뉴 그룹
1. 메뉴 그룹을 생성할 수 있다.
2. 메뉴 그룹을 조회할 수 있다.

### 메뉴
1. 메뉴를 생성할 수 있다.
   1. 메뉴의 가격이 null이거나 0원 보다 작으면 예외가 발생한다.
   2. 메뉴 그룹이 존재하지 않으면 예외가 발생한다.
   3. 존재하지 않는 상품을 사용하면 예외가 발생한다.
   4. 메뉴의 가격이 상품들의 가격의 합보다 크면 예외가 발생한다.
2. 메뉴를 조회할 수 있다.

### 주문
1. 주문을 생성할 수 있다.
   1. 주문 항목들이 없으면 예외가 발생한다.
   2. 주문 항목 수와 메뉴 수가 같지 않으면 예외가 발생한다.(즉, 메뉴가 존재하지 않는 경우)
   3. 주문에 적혀있는 주문 테이블이 존재하지 않으면 예외가 발생한다.
   4. 주문 테이블이 비어있으면 예외가 발생한다.
2. 주문을 조회할 수 있다.
3. 주문을 변경할 수 있다.
   1. 존재하지 않는 주문이면 예외가 발생한다.
   2. 배달이 완료된 상태는 변경하면 예외가 발생한다.

### 상품
1. 상품을 생성할 수 있다.
   1. 상품 가격이 null이거나 0원보다 작으면 예외가 발생한다.
2. 상품을 조회할 수 있다.

### 주문 테이블 그룹
1. 주문 테이블을 묶어서 단체를 지정할 수 있다.
   1. 테이블들이 null이거나 1개 이하이면 예외가 발생한다.
   2. 주문하려는 테이블이 존재하지 않는 테이블이면 예외가 발생한다.
   3. 주문과 존재하는 테이블의 수가 같지 않으면 예외가 발생한다.
   4. 주문하려는 테이블이 빈 테이블이 아니면 예외가 발생한다.
2. 단체 지정을 해제할 수 있다.
   1. 해제하려는 테이블의 상태가 식사 중이거나 요리 중이면 예외가 발생한다.

### 주문 테이블
1. 주문 테이블을 생성할 수 있다.
2. 주문 테이블을 조회할 수 있다.
3. 주문 테이블을 빈 테이블로 변경할 수 있다.
   1. 주문 테이블이 존재하지 않으면 예외가 발생한다.
   2. 주문 테이블이 단체 지정이 되어 있으면 예외가 발생한다.
   3. 주문 테이블의 상태가 식사 중이거나 요리 중이면 예외가 발생한다.
4. 방문한 손님의 명 수를 수정할 수 있다.
   1. 손님의 명 수가 0명보다 적으면 예외가 발생한다.
   2. 주문 테이블이 존재하지 않으면 예외가 발생한다.
   3. 주문 테이블이 비어 있으면 예외가 발생한다.

## 2단계 요구 사항
- 단위 테스트하기 어려운 코드와 단위 테스트 가능한 코드 분리
  - 단위 테스트 가능한 코드에 대해 단위 테스트를 구현한다.
- Spring Data JPA 사용 시 spring.jpa.hibernate.ddl-auto=validate 옵션을 필수로 준다.

## 3단계 요구 사항

- 현재 구조에서는 메뉴의 이름과 가격이 변경되면 주문 항목도 함께 변경된다. 메뉴 정보가 변경되더라도 주문 항목이 변경되지 않게 구현한다.
- 클래스 사이, 패키지 사이의 의존 관계는 단방향이 되도록 한다.

## 용어 사전

| 한글명 | 영문명 | 설명 | 
| --- | --- | --- |
| 상품 | product | 메뉴를 관리하는 기준이 되는 데이터 |
| 메뉴 그룹 | menu group | 메뉴 묶음, 분류 |
| 메뉴 | menu | 메뉴 그룹에 속하는 실제 주문 가능 단위 |
| 메뉴 상품 | menu product | 메뉴에 속하는 수량이 있는 상품 |
| 금액 | amount | 가격 * 수량 |
| 주문 테이블 | order table | 매장에서 주문이 발생하는 영역 |
| 빈 테이블 | empty table | 주문을 등록할 수 없는 주문 테이블 |
| 주문 | order | 매장에서 발생하는 주문 |
| 주문 상태 | order status | 주문은 조리 ➜ 식사 ➜ 계산 완료 순서로 진행된다. |
| 방문한 손님 수 | number of guests | 필수 사항은 아니며 주문은 0명으로 등록할 수 있다. |
| 단체 지정 | table group | 통합 계산을 위해 개별 주문 테이블을 그룹화하는 기능 |
| 주문 항목 | order line item | 주문에 속하는 수량이 있는 메뉴 |
| 매장 식사 | eat in | 포장하지 않고 매장에서 식사하는 것 |
